<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Gestor de Inmuebles</title>

  <!-- Estilos propios -->
  <link rel="stylesheet" href="styles.css" />

  <!-- Iconos de Material (sin React, solo fuente) -->
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
  />
</head>
<body>
  <header class="topbar">
    <div class="logo-area">
      <span class="logo-mark">GI</span>
      <span class="logo-text">Gestor de Inmuebles</span>
    </div>
    <nav class="spa-nav">
      <label class="spa-tab-label" for="tab-edificios">
        <span class="material-symbols-outlined">apartment</span>
        <span class="nav-label-text">Inmuebles</span>
      </label>
      <label class="spa-tab-label" for="tab-unidades">
        <span class="material-symbols-outlined">door_front</span>
        <span class="nav-label-text">Unidades</span>
      </label>
      <label class="spa-tab-label" for="tab-inquilinos">
        <span class="material-symbols-outlined">groups</span>
        <span class="nav-label-text">Inquilinos</span>
      </label>
      <label class="spa-tab-label" for="tab-recibos">
        <span class="material-symbols-outlined">receipt_long</span>
        <span class="nav-label-text">Recibos</span>
      </label>
    </nav>
  </header>

  <!-- Radios ocultos para SPA -->
  <input type="radio" name="spa-nav" id="tab-edificios" class="spa-tab-radio" checked>
  <input type="radio" name="spa-nav" id="tab-unidades" class="spa-tab-radio">
  <input type="radio" name="spa-nav" id="tab-inquilinos" class="spa-tab-radio">
  <input type="radio" name="spa-nav" id="tab-recibos" class="spa-tab-radio">

  <main class="spa-main">

    <!-- PÁGINA: EDIFICIOS -->
    <section class="page page-edificios">
      <h1>Inmuebles</h1>

      <!-- FORMULARIO: EDIFICIO / CASA -->
      <section>
        <h2>Registrar edificio / casa</h2>
        <form id="building-form">
          <label>
            Nombre:
            <input type="text" id="building-name" required />
          </label>
          <label>
            Tipo:
            <select id="building-type">
              <option value="edificio">Edificio</option>
              <option value="casa">Casa</option>
            </select>
          </label>
          <label>
            Dirección:
            <input type="text" id="building-address" />
          </label>
          <label>
            Código medidor de agua:
            <input type="text" id="building-water-meter" />
          </label>

          <!-- NUEVOS CAMPOS OPCIONALES DE SERVICIOS DEL EDIFICIO -->
          <label>
            Código internet (edificio):
            <input type="text" id="building-internet-code" />
          </label>
          <label>
            Empresa / proveedor de internet:
            <input type="text" id="building-internet-company" />
          </label>
          <label>
            Código medidor de gas:
            <input type="text" id="building-gas-code" />
          </label>

          <button type="submit" class="btn btn-primary">
            <span class="material-symbols-outlined">save</span>
            <span class="btn-label">Guardar inmueble</span>
          </button>
        </form>
      </section>

      <!-- LISTA DE EDIFICIOS -->
      <section>
        <h2>Listado de inmuebles</h2>
        <p class="hint">
          Haz clic en el nombre para ir a sus unidades, o pulsa el botón "Personal"
          para ver/registrar personal de servicio sin salir de esta pestaña.
        </p>
        <ul id="building-list" class="list"></ul>
      </section>

      <!-- PERSONAL ASIGNADO AL EDIFICIO -->
      <section>
        <h3>Personal asignado al inmueble</h3>
        <p>
          Inmueble actual (personal):
          <strong id="staff-building-label">Ninguno</strong>
        </p>

        <!-- edificio actual seleccionado para staff.js -->
        <input type="hidden" id="current-building-id" />

        <form id="staff-form">
          <label>
            Tipo de personal:
            <select id="staff-type">
              <option value="limpieza">Limpieza</option>
              <option value="plomeria">Plomería</option>
              <option value="electrico">Eléctrico</option>
              <option value="general">Personal general</option>
            </select>
          </label>
          <label>
            Nombre:
            <input type="text" id="staff-name" required />
          </label>
          <label>
            Teléfono:
            <input type="text" id="staff-phone" />
          </label>
          <label>
            Notas / detalle:
            <input type="text" id="staff-notes" />
          </label>
          <button type="submit" class="btn btn-primary">
            <span class="material-symbols-outlined">person_add</span>
            <span class="btn-label">Agregar personal</span>
          </button>
        </form>

        <h4>Listado de personal del inmueble</h4>
        <ul id="staff-list" class="list"></ul>
      </section>
    </section>

    <!-- PÁGINA: UNIDADES -->
    <section class="page page-unidades">
      <div class="page-header-with-back">
        <label for="tab-edificios" class="back-button">
          <span class="material-symbols-outlined">arrow_back</span>
          <span class="btn-label">Inmuebles</span>
        </label>
        <h1>Unidades</h1>
      </div>

      <!-- UNIDADES DEL INMUEBLE -->
      <section>
        <h2>Unidades del inmueble seleccionado</h2>
        <p>
          Inmueble seleccionado:
          <strong id="selected-building">Ninguno</strong>
        </p>

        <form id="unit-form">
          <label>
            Número / nombre de la unidad:
            <input type="text" id="unit-name" required />
          </label>
          <label>
            Tipo de unidad:
            <select id="unit-type">
              <option value="departamento">Departamento</option>
              <option value="habitacion">Habitación</option>
            </select>
          </label>
          <label>
            Estado:
            <select id="unit-status">
              <option value="libre">Libre</option>
              <option value="ocupado">Ocupado</option>
            </select>
          </label>
          <label>
            Código medidor de luz:
            <input type="text" id="unit-electric-code" />
          </label>
          <button type="submit" class="btn btn-primary">
            <span class="material-symbols-outlined">add_home</span>
            <span class="btn-label">Agregar unidad</span>
          </button>
        </form>

        <h3>Listado de unidades</h3>
        <p class="hint">Haz clic en una unidad para ver sus inquilinos y recibos.</p>
        <ul id="unit-list" class="list"></ul>
      </section>
    </section>

    <!-- PÁGINA: INQUILINOS -->
    <section class="page page-inquilinos">
      <div class="page-header-with-back">
        <label for="tab-unidades" class="back-button">
          <span class="material-symbols-outlined">arrow_back</span>
          <span class="btn-label">Unidades</span>
        </label>
        <h1>Inquilinos</h1>
      </div>

      <section>
        <h2>Inquilinos de la unidad seleccionada</h2>
        <p>
          Unidad seleccionada:
          <strong id="selected-unit">Ninguna</strong>
        </p>

        <form id="tenant-form">
          <label>
            Nombre completo:
            <input type="text" id="tenant-name" required />
          </label>
          <label>
            Documento / DNI:
            <input type="text" id="tenant-doc" />
          </label>
          <label>
            Teléfono:
            <input type="text" id="tenant-phone" />
          </label>
          <label>
            Email:
            <input type="email" id="tenant-email" />
          </label>
          <label>
            Fecha inicio alquiler:
            <input type="date" id="tenant-start-date" />
          </label>
          <label>
            Fecha fin contrato:
            <input type="date" id="tenant-end-date" />
          </label>
          <label>
            Monto alquiler mensual:
            <input type="number" id="tenant-rent" step="0.01" />
          </label>
          <label>
            Notas del contrato:
            <textarea id="tenant-notes" rows="2" placeholder="Ej: viene con mascotas, descuento, condiciones especiales..."></textarea>
          </label>

          <button type="submit" class="btn btn-primary">
            <span class="material-symbols-outlined">person_add</span>
            <span class="btn-label">Agregar inquilino</span>
          </button>
        </form>

        <h3>Listado de inquilinos</h3>
        <ul id="tenant-list" class="list"></ul>
      </section>
    </section>

    <!-- PÁGINA: RECIBOS -->
    <section class="page page-recibos">
      <div class="page-header-with-back">
        <label for="tab-inquilinos" class="back-button">
          <span class="material-symbols-outlined">arrow_back</span>
          <span class="btn-label">Inquilinos</span>
        </label>
        <h1>Recibos</h1>
      </div>

      <section>
        <h2>Generar recibos</h2>
        <p>
          Unidad actual:
          <strong id="invoice-unit-label">Ninguna</strong><br />
          Inquilino:
          <strong id="invoice-tenant-label">Ninguno</strong>
        </p>

        <form id="invoice-form" class="form-grid">
          <div class="inline-fields">
            <label>
              Día:
              <input type="number" id="invoice-day" min="1" max="31" placeholder="Ej: 5" />
            </label>
            <label>
              Mes:
              <select id="invoice-month">
                <option value="01">01</option>
                <option value="02">02</option>
                <option value="03">03</option>
                <option value="04">04</option>
                <option value="05">05</option>
                <option value="06">06</option>
                <option value="07">07</option>
                <option value="08">08</option>
                <option value="09">09</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
              </select>
            </label>
            <label>
              Año:
              <select id="invoice-year"></select>
            </label>
          </div>

          <label>
            Importe alquiler:
            <input type="number" id="rent-amount" min="0" step="0.01" value="0" />
          </label>
          <label>
            Importe luz:
            <input type="number" id="electricity-amount" min="0" step="0.01" value="0" />
          </label>
          <label>
            Importe agua:
            <input type="number" id="water-amount" min="0" step="0.01" value="0" />
          </label>
          <label>
            Otros conceptos:
            <input type="number" id="other-amount" min="0" step="0.01" value="0" />
          </label>
          <label>
            Estado de pago:
            <select id="invoice-status">
              <option value="pendiente">Pendiente</option>
              <option value="pagado">Pagado</option>
            </select>
          </label>
          <label>
            Notas del recibo:
            <textarea
              id="invoice-notes"
              rows="3"
              placeholder="Ej: Pagó en efectivo, incluye deuda anterior, etc."
            ></textarea>
          </label>
          <button type="submit" class="btn btn-primary">
            <span class="material-symbols-outlined">picture_as_pdf</span>
            <span class="btn-label">Generar recibo + PDF</span>
          </button>
        </form>

      </section>

      <section>
        <h2>Listado de recibos</h2>
        <ul id="invoice-list" class="list"></ul>
      </section>
    </section>

  </main>

  <!-- jsPDF para generar PDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <!-- Lógica principal de alquileres -->
  <script type="module" src="app.js"></script>

  <!-- Lógica de personal de servicio (por edificio) -->
  <script type="module" src="staff.js"></script>
</body>
</html>
